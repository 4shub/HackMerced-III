"use strict";function _classCallCheck(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}var _createClass=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),myriagon=function(){function a(b,c){_classCallCheck(this,a);var d=this,e="";this.location=b,this.universities=[],this.input=e=document.getElementById(c),this.myr_id="myr"+document.querySelectorAll(".myr-container").length,this.readFile(function(a){d.universities=a}),this.input.oninput=function(){d.showAutocomplete(e.value)},this.offClick()}return _createClass(a,[{key:"offClick",value:function(){var a=this;document.addEventListener("click",function(b){for(var c=0,d=b.target;d;d=d.parentNode){if("x"===d.id)return;c++}a.hide()})}},{key:"hide",value:function(){this.container&&this.container.setAttribute("style","display:none")}},{key:"show",value:function(){var a=this.input.getBoundingClientRect(),b={top:a.bottom-document.body.getBoundingClientRect().top+this.input.offsetHeight,left:a.left,width:this.input.offsetWidth};this.container&&this.container.setAttribute("style","width:"+b.width+"px;left:"+b.left+"px;top:"+b.top+"px;position:absolute;display:block")}},{key:"showAutocomplete",value:function(a){var b=this;if(a){a=a.toLowerCase(),document.getElementById(this.myr_id)||this.generateContainer(),this.show(),this.container.innerHTML="";for(var c=0,d=0;d<=4;d++)for(var e=c;e<this.universities.length;e++){var f=this.universities[e].toLowerCase().indexOf(a);if(f!==-1){c=e+1;for(var g=this.universities[e].split(""),h="",i=0;i<g.length;i++)g&&g[i]&&(parseFloat(i)===f&&(h+="<span class='myr-matched'>"),h+=g[i],parseFloat(i)===f+a.length&&(h+="</span>"));var j=document.createElement("div");j.setAttribute("class","myr-item"),j.innerHTML="<span class='myr-item-query'>"+h+"</span>",j.onclick=function(a){b.input.value=this.innerText},this.container.appendChild(j);break}}}else this.hide()}},{key:"generateContainer",value:function(){var a=document.createElement("div");a.setAttribute("id",this.myr_id),a.setAttribute("class","myr-container"),this.container=a,document.body.appendChild(a)}},{key:"readFile",value:function(a){var b=new XMLHttpRequest;b.open("GET",this.location,!1),b.onreadystatechange=function(){if(4===b.readyState&&(200===b.status||0===b.status)){var c=b.responseText;c=c.split(","),c.splice(0,2),a(c)}},b.send(null)}}]),a}();module&&module.exports&&(module.exports=myriagon);